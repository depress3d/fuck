import base64
exec(base64.b64decode('IyBEZXZlbG9wZXIgLSBAeHJldGlpYw0KIyBDb250YWN0IG1lIGhlcmUgLSBUZWxlZ3JhbSAtIGh0dHBzOi8vdC5tZS94cmV0aWljDQoNCmZyb20gb3MgaW1wb3J0IHN5c3RlbSwgbmFtZQ0KaW1wb3J0IG9zLCB0aHJlYWRpbmcsIHJlcXVlc3RzLCBzeXMsIGNsb3Vkc2NyYXBlciwgZGF0ZXRpbWUsIHRpbWUsIHNvY2tldCwgc29ja3MsIHNzbCwgcmFuZG9tLCBodHRweA0KZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybHBhcnNlDQpmcm9tIHJlcXVlc3RzLmNvb2tpZXMgaW1wb3J0IFJlcXVlc3RzQ29va2llSmFyDQppbXBvcnQgdW5kZXRlY3RlZF9jaHJvbWVkcml2ZXIgYXMgd2ViZHJpdmVyDQpmcm9tIHN5cyBpbXBvcnQgc3Rkb3V0DQpmcm9tIGNvbG9yYW1hIGltcG9ydCBGb3JlLCBpbml0DQpmcm9tIGNvbG9yYW1hIGltcG9ydCBGb3JlLCBTdHlsZQ0KZnJvbSBzeXMgaW1wb3J0IHN0ZG91dA0KZnJvbSBjb2xvcmFtYSBpbXBvcnQgaW5pdCwgRm9yZQ0KaW1wb3J0IHN5cw0KDQpkZWYgY291bnRkb3duKHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgaWYgKHVudGlsIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgICAgICBzdGRvdXQuZmx1c2goKQ0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKCJcciAiK0ZvcmUuQ1lBTisiWypdIitGb3JlLlJFRCsiIEF0dGFjayBzdGF0dXMgPT4gIiArIHN0cigodW50aWwgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpKSArICIgc2VjIGxlZnQgIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHN0ZG91dC5mbHVzaCgpDQogICAgICAgICAgICBzdGRvdXQud3JpdGUoIlxyICIrRm9yZS5DWUFOKyJbKl0iK0ZvcmUuUkVEKyIgQXR0YWNrIERvbmUgISAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iKQ0KICAgICAgICAgICAgcmV0dXJuDQoNCg0KZGVmIGdldF90YXJnZXQodXJsKToNCiAgICB1cmwgPSB1cmwucnN0cmlwKCkNCiAgICB0YXJnZXQgPSB7fQ0KICAgIHRhcmdldFsndXJpJ10gPSB1cmxwYXJzZSh1cmwpLnBhdGgNCiAgICBpZiB0YXJnZXRbJ3VyaSddID09ICIiOg0KICAgICAgICB0YXJnZXRbJ3VyaSddID0gIi8iDQogICAgdGFyZ2V0Wydob3N0J10gPSB1cmxwYXJzZSh1cmwpLm5ldGxvYw0KICAgIHRhcmdldFsnc2NoZW1lJ10gPSB1cmxwYXJzZSh1cmwpLnNjaGVtZQ0KICAgIGlmICI6IiBpbiB1cmxwYXJzZSh1cmwpLm5ldGxvYzoNCiAgICAgICAgdGFyZ2V0Wydwb3J0J10gPSB1cmxwYXJzZSh1cmwpLm5ldGxvYy5zcGxpdCgiOiIpWzFdDQogICAgZWxzZToNCiAgICAgICAgdGFyZ2V0Wydwb3J0J10gPSAiNDQzIiBpZiB1cmxwYXJzZSh1cmwpLnNjaGVtZSA9PSAiaHR0cHMiIGVsc2UgIjgwIg0KICAgICAgICBwYXNzDQogICAgcmV0dXJuIHRhcmdldA0KDQpkZWYgZ2V0X3Byb3h5bGlzdCh0eXBlKToNCiAgICBpZiB0eXBlID09ICJTT0NLUzUiOg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2FwaS5wcm94eXNjcmFwZS5jb20vP3JlcXVlc3Q9ZGlzcGxheXByb3hpZXMmcHJveHl0eXBlPXNvY2tzNSZ0aW1lb3V0PTEwMDAwJmNvdW50cnk9YWxsIikudGV4dA0KICAgICAgICByICs9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly93d3cucHJveHktbGlzdC5kb3dubG9hZC9hcGkvdjEvZ2V0P3R5cGU9c29ja3M1IikudGV4dA0KICAgICAgICBvcGVuKCIuL3Jlc291cmNlcy9zb2NrczUudHh0IiwgJ3cnKS53cml0ZShyKQ0KICAgICAgICByID0gci5yc3RyaXAoKS5zcGxpdCgnXHJcbicpDQogICAgICAgIHJldHVybiByDQogICAgZWxpZiB0eXBlID09ICJIVFRQIjoNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9hcGkucHJveHlzY3JhcGUuY29tLz9yZXF1ZXN0PWRpc3BsYXlwcm94aWVzJnByb3h5dHlwZT1odHRwJnRpbWVvdXQ9MTAwMDAmY291bnRyeT1hbGwiKS50ZXh0DQogICAgICAgIHIgKz0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3d3dy5wcm94eS1saXN0LmRvd25sb2FkL2FwaS92MS9nZXQ/dHlwZT1odHRwIikudGV4dA0KICAgICAgICBvcGVuKCIuL3Jlc291cmNlcy9odHRwLnR4dCIsICd3Jykud3JpdGUocikNCiAgICAgICAgciA9IHIucnN0cmlwKCkuc3BsaXQoJ1xyXG4nKQ0KICAgICAgICByZXR1cm4gcg0KDQpkZWYgZ2V0X3Byb3hpZXMoKToNCiAgICBnbG9iYWwgcHJveGllcw0KICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cygiLi9wcm94eS50eHQiKToNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFsqXSIrRm9yZS5SRUQrIiBZb3UgTmVlZCBQcm94eSBGaWxlICggLi9wcm94eS50eHQgKVxuIikNCiAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgcHJveGllcyA9IG9wZW4oIi4vcHJveHkudHh0IiwgJ3InKS5yZWFkKCkuc3BsaXQoJ1xuJykNCiAgICByZXR1cm4gVHJ1ZQ0KDQpkZWYgZ2V0X2Nvb2tpZSh1cmwpOg0KICAgIGdsb2JhbCB1c2VyYWdlbnQsIGNvb2tpZUpBUiwgY29va2llDQogICAgb3B0aW9ucyA9IHdlYmRyaXZlci5DaHJvbWVPcHRpb25zKCkNCiAgICBhcmd1bWVudHMgPSBbDQogICAgJy0tbm8tc2FuZGJveCcsICctLWRpc2FibGUtc2V0dWlkLXNhbmRib3gnLCAnLS1kaXNhYmxlLWluZm9iYXJzJywgJy0tZGlzYWJsZS1sb2dnaW5nJywgJy0tZGlzYWJsZS1sb2dpbi1hbmltYXRpb25zJywNCiAgICAnLS1kaXNhYmxlLW5vdGlmaWNhdGlvbnMnLCAnLS1kaXNhYmxlLWdwdScsICctLWhlYWRsZXNzJywgJy0tbGFuZz1rb19LUicsICctLXN0YXJ0LW1heG1pemVkJywNCiAgICAnLS11c2VyLWFnZW50PU1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTBfM18zIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwMy4zLjggKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvMTRHNjAgTWljcm9NZXNzZW5nZXIvNi41LjE4IE5ldFR5cGUvV0lGSSBMYW5ndWFnZS9lbicgDQogICAgXQ0KICAgIGZvciBhcmd1bWVudCBpbiBhcmd1bWVudHM6DQogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KGFyZ3VtZW50KQ0KICAgIGRyaXZlciA9IHdlYmRyaXZlci5DaHJvbWUob3B0aW9ucz1vcHRpb25zKQ0KICAgIGRyaXZlci5pbXBsaWNpdGx5X3dhaXQoMykNCiAgICBkcml2ZXIuZ2V0KHVybCkNCiAgICBmb3IgXyBpbiByYW5nZSg2MCk6DQogICAgICAgIGNvb2tpZXMgPSBkcml2ZXIuZ2V0X2Nvb2tpZXMoKQ0KICAgICAgICB0cnl5ID0gMA0KICAgICAgICBmb3IgaSBpbiBjb29raWVzOg0KICAgICAgICAgICAgaWYgaVsnbmFtZSddID09ICdjZl9jbGVhcmFuY2UnOg0KICAgICAgICAgICAgICAgIGNvb2tpZUpBUiA9IGRyaXZlci5nZXRfY29va2llcygpW3RyeXldDQogICAgICAgICAgICAgICAgdXNlcmFnZW50ID0gZHJpdmVyLmV4ZWN1dGVfc2NyaXB0KCJyZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudCIpDQogICAgICAgICAgICAgICAgY29va2llID0gZiJ7Y29va2llSkFSWyduYW1lJ119PXtjb29raWVKQVJbJ3ZhbHVlJ119Ig0KICAgICAgICAgICAgICAgIGRyaXZlci5xdWl0KCkNCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICB0cnl5ICs9IDENCiAgICAgICAgICAgICAgICBwYXNzDQogICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICBkcml2ZXIucXVpdCgpDQogICAgcmV0dXJuIEZhbHNlDQoNCmRlZiBzcG9vZih0YXJnZXQpOg0KICAgIGFkZHIgPSBbMTkyLCAxNjgsIDAsIDFdDQogICAgZCA9ICcuJw0KICAgIGFkZHJbMF0gPSBzdHIocmFuZG9tLnJhbmRyYW5nZSgxMSwgMTk3KSkNCiAgICBhZGRyWzFdID0gc3RyKHJhbmRvbS5yYW5kcmFuZ2UoMCwgMjU1KSkNCiAgICBhZGRyWzJdID0gc3RyKHJhbmRvbS5yYW5kcmFuZ2UoMCwgMjU1KSkNCiAgICBhZGRyWzNdID0gc3RyKHJhbmRvbS5yYW5kcmFuZ2UoMiwgMjU0KSkNCiAgICBzcG9vZmlwID0gYWRkclswXSArIGQgKyBhZGRyWzFdICsgZCArIGFkZHJbMl0gKyBkICsgYWRkclszXQ0KICAgIHJldHVybiAoDQogICAgICAgICJYLUZvcndhcmRlZC1Qcm90bzogSHR0cFxyXG4iDQogICAgICAgIGYiWC1Gb3J3YXJkZWQtSG9zdDoge3RhcmdldFsnaG9zdCddfSwgMS4xLjEuMVxyXG4iDQogICAgICAgIGYiVmlhOiB7c3Bvb2ZpcH1cclxuIg0KICAgICAgICBmIkNsaWVudC1JUDoge3Nwb29maXB9XHJcbiINCiAgICAgICAgZidYLUZvcndhcmRlZC1Gb3I6IHtzcG9vZmlwfVxyXG4nDQogICAgICAgIGYnUmVhbC1JUDoge3Nwb29maXB9XHJcbicNCiAgICApDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiBnZXRfaW5mb19sNygpOg0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdtIOKAoiAiK0ZvcmUuUkVEKyJVUkwgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuTElHSFRDWUFOX0VYKQ0KICAgIHRhcmdldCA9IGlucHV0KCkNCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLlJFRCsiVEhSRUFEICAgIitGb3JlLkNZQU4rIjogIitGb3JlLkxJR0hUQ1lBTl9FWCkNCiAgICB0aHJlYWQgPSBpbnB1dCgpDQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N20g4oCiICIrRm9yZS5SRUQrIlRJTUUocykgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5MSUdIVENZQU5fRVgpDQogICAgdCA9IGlucHV0KCkNCiAgICByZXR1cm4gdGFyZ2V0LCB0aHJlYWQsIHQNCg0KZGVmIGdldF9pbmZvX2w0KCk6DQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N20g4oCiICIrRm9yZS5SRUQrIklQICAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5MSUdIVENZQU5fRVgpDQogICAgdGFyZ2V0ID0gaW5wdXQoKQ0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdtIOKAoiAiK0ZvcmUuUkVEKyJQT1JUICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuTElHSFRDWUFOX0VYKQ0KICAgIHBvcnQgPSBpbnB1dCgpDQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N20g4oCiICIrRm9yZS5SRUQrIlRIUkVBRCAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5MSUdIVENZQU5fRVgpDQogICAgdGhyZWFkID0gaW5wdXQoKQ0KICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdtIOKAoiAiK0ZvcmUuUkVEKyJUSU1FKHMpICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuTElHSFRDWUFOX0VYKQ0KICAgIHQgPSBpbnB1dCgpDQogICAgcmV0dXJuIHRhcmdldCwgcG9ydCwgdGhyZWFkLCB0DQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiNyZWdpb24gbGF5ZXI0DQpkZWYgcnVuZmxvb2Rlcihob3N0LCBwb3J0LCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICByYW5kID0gcmFuZG9tLl91cmFuZG9tKDQwOTYpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWZsb29kZXIsIGFyZ3M9KGhvc3QsIHBvcnQsIHJhbmQsIHVudGlsKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIGZsb29kZXIoaG9zdCwgcG9ydCwgcmFuZCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIHNvY2sgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuSVBQUk9UT19JR01QKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzb2NrLnNlbmR0byhyYW5kLCAoaG9zdCwgaW50KHBvcnQpKSkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgc29jay5jbG9zZSgpDQogICAgICAgICAgICBwYXNzDQoNCg0KZGVmIHJ1bnNlbmRlcihob3N0LCBwb3J0LCB0aCwgdCwgcGF5bG9hZCk6DQogICAgaWYgcGF5bG9hZCA9PSAiIjoNCiAgICAgICAgcGF5bG9hZCA9IHJhbmRvbS5fdXJhbmRvbSg2MDAwMCkNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgICNwYXlsb2FkID0gUGF5bG9hZHNbbWV0aG9kXQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1zZW5kZXIsIGFyZ3M9KGhvc3QsIHBvcnQsIHVudGlsLCBwYXlsb2FkKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIHNlbmRlcihob3N0LCBwb3J0LCB1bnRpbF9kYXRldGltZSwgcGF5bG9hZCk6DQogICAgc29jayA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX0RHUkFNKQ0KICAgIHNvY2suc2V0c29ja29wdChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX1JFVVNFQUREUiwgMSkNCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc29jay5zZW5kdG8ocGF5bG9hZCwgKGhvc3QsIGludChwb3J0KSkpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHNvY2suY2xvc2UoKQ0KICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gTUVUSE9EDQoNCiNyZWdpb24gSEVBRA0KDQpkZWYgTGF1bmNoKHVybCwgdGgsIHQsIG1ldGhvZCk6ICN0ZXN0aW5nDQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZXhlYygidGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrIittZXRob2QrIiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkiKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCg0KZGVmIExhdW5jaEhFQUQodXJsLCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrSEVBRCwgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tIRUFEKHVybCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXF1ZXN0cy5oZWFkKHVybCkNCiAgICAgICAgICAgIHJlcXVlc3RzLmhlYWQodXJsKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUE9TVA0KZGVmIExhdW5jaFBPU1QodXJsLCB0aCwgdCk6DQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrUE9TVCwgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tQT1NUKHVybCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KHVybCkNCiAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QodXJsKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUkFXDQpkZWYgTGF1bmNoUkFXKHVybCwgdGgsIHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1JBVywgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tSQVcodXJsLCB1bnRpbF9kYXRldGltZSk6DQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJlcXVlc3RzLmdldCh1cmwpDQogICAgICAgICAgICByZXF1ZXN0cy5nZXQodXJsKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUFhSQVcNCmRlZiBMYXVuY2hQWFJBVyh1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWFJBVywgYXJncz0odXJsLCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tQWFJBVyh1cmwsIHVudGlsX2RhdGV0aW1lKToNCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgcHJveHkgPSAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpDQogICAgICAgIHByb3h5ID0gew0KICAgICAgICAgICAgJ2h0dHAnOiBwcm94eSwgICANCiAgICAgICAgICAgICdodHRwcyc6IHByb3h5LA0KICAgICAgICB9DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJlcXVlc3RzLmdldCh1cmwsIHByb3hpZXM9cHJveHkpDQogICAgICAgICAgICByZXF1ZXN0cy5nZXQodXJsLCBwcm94aWVzPXByb3h5KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gUFhTT0MNCmRlZiBMYXVuY2hQWFNPQyh1cmwsIHRoLCB0KToNCiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHJlcSA9ICAiR0VUICIgK3RhcmdldFsndXJpJ10gKyAiIEhUVFAvMS4xXHJcbiINCiAgICByZXEgKz0gIkhvc3Q6ICIgKyB0YXJnZXRbJ2hvc3QnXSArICJcclxuIg0KICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iDQogICAgcmVxICs9ICJBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nIg0KICAgIHJlcSArPSAiQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG5cclxuIg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWFNPQywgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja1BYU09DKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6DQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHByb3h5ID0gcmFuZG9tLmNob2ljZShsaXN0KHByb3hpZXMpKS5zcGxpdCgiOiIpDQogICAgICAgICAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6DQogICAgICAgICAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICAgICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgICAgICAgICBzLnNldF9wcm94eShzb2Nrcy5IVFRQLCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQ0KICAgICAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgICAgICAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgICAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLkhUVFAsIHN0cihwcm94eVswXSksIGludChwcm94eVsxXSkpDQogICAgICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICByZXR1cm4NCiNlbmRyZWdpb24NCg0KI3JlZ2lvbiBTT0MNCmRlZiBMYXVuY2hTT0ModXJsLCB0aCwgdCk6DQogICAgdGFyZ2V0ID0gZ2V0X3RhcmdldCh1cmwpDQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiINCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIg0KICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyINCiAgICByZXEgKz0gIkNvbm5lY3Rpb246IEtlZXAtQWxpdmVcclxuXHJcbiINCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrU09DLCBhcmdzPSh0YXJnZXQsIHVudGlsLCByZXEpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrU09DKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6DQogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQ0KICAgIGVsc2U6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KI2VuZHJlZ2lvbg0KDQpkZWYgTGF1bmNoUFBTKHVybCwgdGgsIHQpOg0KICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQ0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1BQUywgYXJncz0odGFyZ2V0LCB1bnRpbCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tQUFModGFyZ2V0LCB1bnRpbF9kYXRldGltZSk6ICMNCiAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgZWxzZToNCiAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZSgiR0VUIC8gSFRUUC8xLjFcclxuXHJcbiIpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBMYXVuY2hOVUxMKHVybCwgdGgsIHQpOg0KICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQ0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgcmVxID0gICJHRVQgIit0YXJnZXRbJ3VyaSddKyIgSFRUUC8xLjFcclxuSG9zdDogIiArIHRhcmdldFsnaG9zdCddICsgIlxyXG4iDQogICAgcmVxICs9ICJVc2VyLUFnZW50OiBudWxsXHJcbiINCiAgICByZXEgKz0gIlJlZmVycmVyOiBudWxsXHJcbiINCiAgICByZXEgKz0gc3Bvb2YodGFyZ2V0KSArICJcclxuIg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tOVUxMLCBhcmdzPSh0YXJnZXQsIHVudGlsLCByZXEpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrTlVMTCh0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEpOiAjDQogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQ0KICAgIGVsc2U6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgTGF1bmNoU1BPT0YodXJsLCB0aCwgdCk6DQogICAgdGFyZ2V0ID0gZ2V0X3RhcmdldCh1cmwpDQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkNCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiINCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIg0KICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyINCiAgICByZXEgKz0gc3Bvb2YodGFyZ2V0KQ0KICAgIHJlcSArPSAiQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG5cclxuIg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tTUE9PRiwgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja1NQT09GKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6ICMNCiAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6DQogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQ0KICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgZWxzZToNCiAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOg0KICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHMuY2xvc2UoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBMYXVuY2hQWFNQT09GKHVybCwgdGgsIHQsIHByb3h5KToNCiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHJlcSA9ICAiR0VUICIrdGFyZ2V0Wyd1cmknXSsiIEhUVFAvMS4xXHJcbkhvc3Q6ICIgKyB0YXJnZXRbJ2hvc3QnXSArICJcclxuIg0KICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iDQogICAgcmVxICs9ICJBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nIg0KICAgIHJlcSArPSBzcG9vZih0YXJnZXQpDQogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJhbmRvbXByb3h5ID0gcmFuZG9tLmNob2ljZShwcm94eSkNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1BYU1BPT0YsIGFyZ3M9KHRhcmdldCwgdW50aWwsIHJlcSwgcmFuZG9tcHJveHkpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrUFhTUE9PRih0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEsIHByb3h5KTogIw0KICAgIHByb3h5ID0gcHJveHkuc3BsaXQoIjoiKQ0KICAgIHByaW50KHByb3h5KQ0KICAgIHRyeToNCiAgICAgICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQ0KICAgICAgICAgICAgI3Muc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkNCiAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLlNPQ0tTNSwgc3RyKHByb3h5WzBdKSwgaW50KHByb3h5WzFdKSkNCiAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpDQogICAgICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpDQogICAgICAgICAgICAjcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQ0KICAgICAgICAgICAgcy5zZXRfcHJveHkoc29ja3MuU09DS1M1LCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQ0KICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICBleGNlcHQ6DQogICAgICAgIHJldHVybg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQojcmVnaW9uIENGQg0KZGVmIExhdW5jaENGQih1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHNjcmFwZXIgPSBjbG91ZHNjcmFwZXIuY3JlYXRlX3NjcmFwZXIoKQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRkIsIGFyZ3M9KHVybCwgdW50aWwsIHNjcmFwZXIpKQ0KICAgICAgICAgICAgdGhkLnN0YXJ0KCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFzcw0KDQpkZWYgQXR0YWNrQ0ZCKHVybCwgdW50aWxfZGF0ZXRpbWUsIHNjcmFwZXIpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmwsIHRpbWVvdXQ9MTUpDQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmwsIHRpbWVvdXQ9MTUpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCiNlbmRyZWdpb24NCg0KI3JlZ2lvbiBQWENGQg0KZGVmIExhdW5jaFBYQ0ZCKHVybCwgdGgsIHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgc2NyYXBlciA9IGNsb3Vkc2NyYXBlci5jcmVhdGVfc2NyYXBlcigpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1BYQ0ZCLCBhcmdzPSh1cmwsIHVudGlsLCBzY3JhcGVyKSkNCiAgICAgICAgICAgIHRoZC5zdGFydCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja1BYQ0ZCKHVybCwgdW50aWxfZGF0ZXRpbWUsIHNjcmFwZXIpOg0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwcm94eSA9IHsNCiAgICAgICAgICAgICAgICAgICAgJ2h0dHAnOiAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpLCAgIA0KICAgICAgICAgICAgICAgICAgICAnaHR0cHMnOiAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsLCBwcm94aWVzPXByb3h5KQ0KICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsLCBwcm94aWVzPXByb3h5KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQojZW5kcmVnaW9uDQoNCiNyZWdpb24gQ0ZQUk8NCmRlZiBMYXVuY2hDRlBSTyh1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICBzY3JhcGVyID0gY2xvdWRzY3JhcGVyLmNyZWF0ZV9zY3JhcGVyKHNlc3M9c2Vzc2lvbikNCiAgICBqYXIgPSBSZXF1ZXN0c0Nvb2tpZUphcigpDQogICAgamFyLnNldChjb29raWVKQVJbJ25hbWUnXSwgY29va2llSkFSWyd2YWx1ZSddKQ0KICAgIHNjcmFwZXIuY29va2llcyA9IGphcg0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRlBSTywgYXJncz0odXJsLCB1bnRpbCwgc2NyYXBlcikpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBBdHRhY2tDRlBSTyh1cmwsIHVudGlsX2RhdGV0aW1lLCBzY3JhcGVyKToNCiAgICBoZWFkZXJzID0gew0KICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEwXzNfMyBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDMuMy44IChLSFRNTCwgbGlrZSBHZWNrbykgTW9iaWxlLzE0RzYwIE1pY3JvTWVzc2VuZ2VyLzYuNS4xOCBOZXRUeXBlL1dJRkkgTGFuZ3VhZ2UvZW4nLA0KICAgICAgICAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAndHItVFIsdHI7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLA0KICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2RlZmxhdGUsIGd6aXA7cT0xLjAsICo7cT0wLjUnLA0KICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsDQogICAgICAgICdQcmFnbWEnOiAnbm8tY2FjaGUnLA0KICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywNCiAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsDQogICAgICAgICdTZWMtRmV0Y2gtRGVzdCc6ICdkb2N1bWVudCcsDQogICAgICAgICdTZWMtRmV0Y2gtTW9kZSc6ICduYXZpZ2F0ZScsDQogICAgICAgICdTZWMtRmV0Y2gtU2l0ZSc6ICdzYW1lLW9yaWdpbicsDQogICAgICAgICdTZWMtRmV0Y2gtVXNlcic6ICc/MScsDQogICAgICAgICdURSc6ICd0cmFpbGVycycsDQogICAgfQ0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGFsbG93X0NZQU5pcmVjdHM9RmFsc2UpDQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGFsbG93X0NZQU5pcmVjdHM9RmFsc2UpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCiNlbmRyZWdpb24NCg0KI3JlZ2lvbiBDRlNPQw0KZGVmIExhdW5jaENGU09DKHVybCwgdGgsIHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgdGFyZ2V0ID0gZ2V0X3RhcmdldCh1cmwpDQogICAgcmVxID0gICdHRVQgJysgdGFyZ2V0Wyd1cmknXSArJyBIVFRQLzEuMVxyXG4nDQogICAgcmVxICs9ICdIb3N0OiAnICsgdGFyZ2V0Wydob3N0J10gKyAnXHJcbicNCiAgICByZXEgKz0gJ0FjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XHJcbicNCiAgICByZXEgKz0gJ0FjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnJcclxuJw0KICAgIHJlcSArPSAnQWNjZXB0LUxhbmd1YWdlOiBrbyxrby1LUjtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuN1xyXG4nDQogICAgcmVxICs9ICdDYWNoZS1Db250cm9sOiBtYXgtYWdlPTBcclxuJw0KICAgIHJlcSArPSAnQ29va2llOiAnICsgY29va2llICsgJ1xyXG4nDQogICAgcmVxICs9IGYnc2VjLWNoLXVhOiAiQ2hyb21pdW0iO3Y9IjEwMCIsICJHb29nbGUgQ2hyb21lIjt2PSIxMDAiXHJcbicNCiAgICByZXEgKz0gJ3NlYy1jaC11YS1tb2JpbGU6ID8wXHJcbicNCiAgICByZXEgKz0gJ3NlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiXHJcbicNCiAgICByZXEgKz0gJ3NlYy1mZXRjaC1kZXN0OiBlbXB0eVxyXG4nDQogICAgcmVxICs9ICdzZWMtZmV0Y2gtbW9kZTogY29yc1xyXG4nDQogICAgcmVxICs9ICdzZWMtZmV0Y2gtc2l0ZTogc2FtZS1vcmlnaW5cclxuJw0KICAgIHJlcSArPSAnQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG4nDQogICAgcmVxICs9ICdVc2VyLUFnZW50OiAnICsgdXNlcmFnZW50ICsgJ1xyXG5cclxuXHJcbicNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrQ0ZTT0MsYXJncz0odW50aWwsIHRhcmdldCwgcmVxLCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6ICANCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIEF0dGFja0NGU09DKHVudGlsX2RhdGV0aW1lLCB0YXJnZXQsIHJlcSk6DQogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICBwYWNrZXQgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcGFja2V0LnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHBhY2tldC5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgcGFja2V0ID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChwYWNrZXQsIHNlcnZlcl9ob3N0bmFtZT10YXJnZXRbJ2hvc3QnXSkNCiAgICBlbHNlOg0KICAgICAgICBwYWNrZXQgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcGFja2V0LnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHBhY2tldC5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTApOg0KICAgICAgICAgICAgICAgIHBhY2tldC5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFja2V0LmNsb3NlKCkNCiAgICAgICAgICAgIHBhc3MNCiNlbmRyZWdpb24NCg0KI3JlZ2lvbiB0ZXN0em9uZQ0KZGVmIGF0dGFja1NLWSh1cmwsIHRpbWVyLCB0aHJlYWRzKToNCiAgICBmb3IgaSBpbiByYW5nZShpbnQodGhyZWFkcykpOg0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1MYXVuY2hTS1ksIGFyZ3M9KHVybCwgdGltZXIpKS5zdGFydCgpDQoNCmRlZiBMYXVuY2hTS1kodXJsLCB0aW1lcik6DQogICAgcHJveHkgPSByYW5kb20uY2hvaWNlKHByb3hpZXMpLnN0cmlwKCkuc3BsaXQoIjoiKQ0KICAgIHRpbWVsb2wgPSB0aW1lLnRpbWUoKSArIGludCh0aW1lcikNCiAgICByZXEgPSAgIkdFVCAvIEhUVFAvMS4xXHJcbkhvc3Q6ICIgKyB1cmxwYXJzZSh1cmwpLm5ldGxvYyArICJcclxuIg0KICAgIHJlcSArPSAiQ2FjaGUtQ29udHJvbDogbm8tY2FjaGVcclxuIg0KICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iDQogICAgcmVxICs9ICJBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nIg0KICAgIHJlcSArPSAiU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luXHJcbiINCiAgICByZXEgKz0gIlNlYy1HUEM6IDFcclxuIg0KICAgIHJlcSArPSAiU2VjLUZldGNoLU1vZGU6IG5hdmlnYXRlXHJcbiINCiAgICByZXEgKz0gIlNlYy1GZXRjaC1EZXN0OiBkb2N1bWVudFxyXG4iDQogICAgcmVxICs9ICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzOiAxXHJcbiINCiAgICByZXEgKz0gIkNvbm5lY3Rpb246IEtlZXAtQWxpdmVcclxuXHJcbiINCiAgICB3aGlsZSB0aW1lLnRpbWUoKSA8IHRpbWVsb2w6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHVybHBhcnNlKHVybCkubmV0bG9jKSwgaW50KDQ0MykpKQ0KICAgICAgICAgICAgcy5zZXRfcHJveHkoc29ja3MuU09DS1M1LCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQ0KICAgICAgICAgICAgY3R4ID0gc3NsLlNTTENvbnRleHQoKQ0KICAgICAgICAgICAgcyA9IGN0eC53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dXJscGFyc2UodXJsKS5uZXRsb2MpDQogICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwMCk6DQogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgcy5jbG9zZSgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHMuY2xvc2UoKQ0KDQpkZWYgYXR0YWNrU1RFTExBUih1cmwsIHRpbWVyLCB0aHJlYWRzKToNCiAgICBmb3IgaSBpbiByYW5nZShpbnQodGhyZWFkcykpOg0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1MYXVuY2hTVEVMTEFSLCBhcmdzPSh1cmwsIHRpbWVyKSkuc3RhcnQoKQ0KDQpkZWYgTGF1bmNoU1RFTExBUih1cmwsIHRpbWVyKToNCiAgICB0aW1lbG9sID0gdGltZS50aW1lKCkgKyBpbnQodGltZXIpDQogICAgcmVxID0gICJHRVQgLyBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdXJscGFyc2UodXJsKS5uZXRsb2MgKyAiXHJcbiINCiAgICByZXEgKz0gIkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlXHJcbiINCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIg0KICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyINCiAgICByZXEgKz0gIlNlYy1GZXRjaC1TaXRlOiBzYW1lLW9yaWdpblxyXG4iDQogICAgcmVxICs9ICJTZWMtR1BDOiAxXHJcbiINCiAgICByZXEgKz0gIlNlYy1GZXRjaC1Nb2RlOiBuYXZpZ2F0ZVxyXG4iDQogICAgcmVxICs9ICJTZWMtRmV0Y2gtRGVzdDogZG9jdW1lbnRcclxuIg0KICAgIHJlcSArPSAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMVxyXG4iDQogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iDQogICAgd2hpbGUgdGltZS50aW1lKCkgPCB0aW1lbG9sOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBzID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfU1RSRUFNKQ0KICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodXJscGFyc2UodXJsKS5uZXRsb2MpLCBpbnQoNDQzKSkpDQogICAgICAgICAgICBjdHggPSBzc2wuY3JlYXRlX2RlZmF1bHRfY29udGV4dCgpDQogICAgICAgICAgICBzID0gY3R4LndyYXBfc29ja2V0KHMsIHNlcnZlcl9ob3N0bmFtZT11cmxwYXJzZSh1cmwpLm5ldGxvYykNCiAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICBzLmNsb3NlKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcy5jbG9zZSgpDQojZW5kcmVnaW9uDQoNCmRlZiBMYXVuY2hIVFRQMih1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOg0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tIVFRQMiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkNCg0KZGVmIEF0dGFja0hUVFAyKHVybCwgdW50aWxfZGF0ZXRpbWUpOg0KICAgIGhlYWRlcnMgPSB7DQogICAgICAgICAgICAnVXNlci1BZ2VudCc6IHJhbmRvbS5jaG9pY2UodWEpLA0KICAgICAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLA0KICAgICAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6ICd0ci1UUix0cjtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNycsDQogICAgICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2RlZmxhdGUsIGd6aXA7cT0xLjAsICo7cT0wLjUnLA0KICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLA0KICAgICAgICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsDQogICAgICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywNCiAgICAgICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnLA0KICAgICAgICAgICAgJ1NlYy1GZXRjaC1EZXN0JzogJ2RvY3VtZW50JywNCiAgICAgICAgICAgICdTZWMtRmV0Y2gtTW9kZSc6ICduYXZpZ2F0ZScsDQogICAgICAgICAgICAnU2VjLUZldGNoLVNpdGUnOiAnc2FtZS1vcmlnaW4nLA0KICAgICAgICAgICAgJ1NlYy1GZXRjaC1Vc2VyJzogJz8xJywNCiAgICAgICAgICAgICdURSc6ICd0cmFpbGVycycsDQogICAgICAgICAgICB9DQogICAgY2xpZW50ID0gaHR0cHguQ2xpZW50KGh0dHAyPVRydWUpDQogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGNsaWVudC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpDQogICAgICAgICAgICBjbGllbnQuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiBMYXVuY2hQWEhUVFAyKHVybCwgdGgsIHQpOg0KICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpDQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6DQogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja0hUVFAyLCBhcmdzPSh1cmwsIHVudGlsKSkuc3RhcnQoKQ0KDQpkZWYgQXR0YWNrUFhIVFRQMih1cmwsIHVudGlsX2RhdGV0aW1lKToNCiAgICBoZWFkZXJzID0gew0KICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKHVhKSwNCiAgICAgICAgICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywNCiAgICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAndHItVFIsdHI7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLA0KICAgICAgICAgICAgJ0FjY2VwdC1FbmNvZGluZyc6ICdkZWZsYXRlLCBnemlwO3E9MS4wLCAqO3E9MC41JywNCiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJywNCiAgICAgICAgICAgICdQcmFnbWEnOiAnbm8tY2FjaGUnLA0KICAgICAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsDQogICAgICAgICAgICAnVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyc6ICcxJywNCiAgICAgICAgICAgICdTZWMtRmV0Y2gtRGVzdCc6ICdkb2N1bWVudCcsDQogICAgICAgICAgICAnU2VjLUZldGNoLU1vZGUnOiAnbmF2aWdhdGUnLA0KICAgICAgICAgICAgJ1NlYy1GZXRjaC1TaXRlJzogJ3NhbWUtb3JpZ2luJywNCiAgICAgICAgICAgICdTZWMtRmV0Y2gtVXNlcic6ICc/MScsDQogICAgICAgICAgICAnVEUnOiAndHJhaWxlcnMnLA0KICAgICAgICAgICAgfQ0KICAgIA0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjbGllbnQgPSBodHRweC5DbGllbnQoDQogICAgICAgICAgICAgICAgaHR0cDI9VHJ1ZSwNCiAgICAgICAgICAgICAgICBwcm94aWVzPXsNCiAgICAgICAgICAgICAgICAgICAgJ2h0dHA6Ly8nOiAnaHR0cDovLycrcmFuZG9tLmNob2ljZShwcm94aWVzKSwNCiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vJzogJ2h0dHA6Ly8nK3JhbmRvbS5jaG9pY2UocHJveGllcyksDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICkNCiAgICAgICAgICAgIGNsaWVudC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpDQogICAgICAgICAgICBjbGllbnQuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCmRlZiB0ZXN0MSh1cmwsIHRoLCB0KToNCiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQ0KICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQ0KICAgIHJlcSA9ICAnR0VUICcrIHRhcmdldFsndXJpJ10gKycgSFRUUC8xLjFcclxuJw0KICAgIHJlcSArPSAnSG9zdDogJyArIHRhcmdldFsnaG9zdCddICsgJ1xyXG4nDQogICAgcmVxICs9ICdBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nDQogICAgcmVxICs9ICdBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyXHJcbicNCiAgICByZXEgKz0gJ0FjY2VwdC1MYW5ndWFnZToga28sa28tS1I7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjdcclxuJw0KICAgIHJlcSArPSAnQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wXHJcbicNCiAgICAjcmVxICs9ICdDb29raWU6ICcgKyBjb29raWUgKyAnXHJcbicNCiAgICByZXEgKz0gZidzZWMtY2gtdWE6ICJDaHJvbWl1bSI7dj0iMTAwIiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEwMCJcclxuJw0KICAgIHJlcSArPSAnc2VjLWNoLXVhLW1vYmlsZTogPzBcclxuJw0KICAgIHJlcSArPSAnc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyJcclxuJw0KICAgIHJlcSArPSAnc2VjLWZldGNoLWRlc3Q6IGVtcHR5XHJcbicNCiAgICByZXEgKz0gJ3NlYy1mZXRjaC1tb2RlOiBjb3JzXHJcbicNCiAgICByZXEgKz0gJ3NlYy1mZXRjaC1zaXRlOiBzYW1lLW9yaWdpblxyXG4nDQogICAgcmVxICs9ICdDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcbicNCiAgICByZXEgKz0gJ1VzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTBfM18zIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwMy4zLjggKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvMTRHNjAgTWljcm9NZXNzZW5nZXIvNi41LjE4IE5ldFR5cGUvV0lGSSBMYW5ndWFnZS9lblxyXG5cclxuXHJcbicNCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9dGVzdDIsYXJncz0odW50aWwsIHRhcmdldCwgcmVxLCkpDQogICAgICAgICAgICB0aGQuc3RhcnQoKQ0KICAgICAgICBleGNlcHQ6ICANCiAgICAgICAgICAgIHBhc3MNCg0KZGVmIHRlc3QyKHVudGlsX2RhdGV0aW1lLCB0YXJnZXQsIHJlcSk6DQogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOg0KICAgICAgICBwYWNrZXQgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcGFja2V0LnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHBhY2tldC5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICAgICAgcGFja2V0ID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChwYWNrZXQsIHNlcnZlcl9ob3N0bmFtZT10YXJnZXRbJ2hvc3QnXSkNCiAgICBlbHNlOg0KICAgICAgICBwYWNrZXQgPSBzb2Nrcy5zb2Nrc29ja2V0KCkNCiAgICAgICAgcGFja2V0LnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpDQogICAgICAgIHBhY2tldC5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkNCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTApOg0KICAgICAgICAgICAgICAgIHBhY2tldC5zZW5kKHN0ci5lbmNvZGUocmVxKSkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcGFja2V0LmNsb3NlKCkNCiAgICAgICAgICAgIHBhc3MNCg0KaW5pdChhdXRvcmVzZXQ9VHJ1ZSkNCg0KDQpkZWYgY2xlYXIoKTogDQogICAgaWYgbmFtZSA9PSAnbnQnOiANCiAgICAgICAgc3lzdGVtKCdjbHMnKQ0KICAgIGVsc2U6IA0KICAgICAgICBzeXN0ZW0oJ2NsZWFyJykNCg0KZGVmIGhlbHAoKToNCiAgICBjbGVhcigpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5SRUQgICArIiAg4pWmIOKVpuKVlOKVkOKVl+KVpiAg4pWU4pWQ4pWXICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICsiICDilaDilZDilaPilZHilaMg4pWRICDilaDilZDilZ0gICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLlJFRCAgICArIiAg4pWpIOKVqeKVmuKVkOKVneKVqeKVkOKVneKVqSAgICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJsYXllcjcgICAiK0ZvcmUuQ1lBTisifCIrRm9yZS5SRUQrIiBTaG93IExheWVyNyBNZXRob2RzICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrImxheWVyNCAgICIrRm9yZS5DWUFOKyJ8IitGb3JlLlJFRCsiIFNob3cgTGF5ZXI0IE1ldGhvZHMgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsidG9vbHMgICAgIitGb3JlLkNZQU4rInwiK0ZvcmUuUkVEKyIgU2hvdyB0b29scyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJleGl0ICAgICAiK0ZvcmUuQ1lBTisifCIrRm9yZS5SRUQrIiBFeGl0IERET1NFUiBQYW5lbCAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVoOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVo1xuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJTb2NpYWxzICAiK0ZvcmUuQ1lBTisifCIrRm9yZS5SRUQrIiBodHRwczovL2xuLmtpL3hyZXRpYyAgICAgICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrIkdpdEh1YiAgICIrRm9yZS5DWUFOKyJ8IitGb3JlLlJFRCsiIGh0dHBzOi8vZ2l0aHViLmNvbS9kZXByZXNzM2QgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikNCiAgICBzdGRvdXQud3JpdGUoIlxuIikNCg0KDQpkZWYgbGF5ZXI3KCk6DQogICAgY2xlYXIoKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLlJFRCAgICsi4pWmICDilZTilZDilZfilaYg4pWm4pWU4pWQ4pWX4pWm4pWQ4pWXIOKVkOKVkOKVlyAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgKyLilZEgIOKVoOKVkOKVo+KVmuKVpuKVneKVkeKVoyDilaDilabilZ0gIOKVlOKVnSAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLlJFRCAgICArIuKVqeKVkOKVneKVqSDilakg4pWpIOKVmuKVkOKVneKVqeKVmuKVkCAg4pWpICAgICAgICAgICAgICBcbiIpDQoNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJjZmIgICAgIitGb3JlLkNZQU4rIiB8IitGb3JlLlJFRCsiIEJ5cGFzcyBDRiBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrInB4Y2ZiICAiK0ZvcmUuQ1lBTisiIHwiK0ZvcmUuUkVEKyIgQnlwYXNzIENGIEF0dGFjayBXaXRoIFByb3h5ICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKSAgICAgICAgICAgICAgICAgIA0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsiY2ZyZXEgICIrRm9yZS5DWUFOKyIgfCIrRm9yZS5SRUQrIiBCeXBhc3MgQ0YgVUFNLCBDQVBUQ0hBLCBCRk0gKHJlcXVlc3QpICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJjZnNvYyAgIitGb3JlLkNZQU4rIiB8IitGb3JlLlJFRCsiIEJ5cGFzcyBDRiBVQU0sIENBUFRDSEEsIEJGTSAoc29ja2V0KSAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrInB4c2t5ICAiK0ZvcmUuQ1lBTisiIHwiK0ZvcmUuUkVEKyIgQnlwYXNzIEdvb2dsZSBQcm9qZWN0IFNoaWVsZCwgVnNoaWVsZCwgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsic2t5ICAgICIrRm9yZS5DWUFOKyIgfCIrRm9yZS5SRUQrIiBTa3kgbWV0aG9kIHdpdGhvdXQgcHJveHkgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJodHRwMiAgIitGb3JlLkNZQU4rIiB8IitGb3JlLlJFRCsiIEhUVFAgMi4wIFJlcXVlc3QgQXR0YWNrICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrInB4aHR0cDIiK0ZvcmUuQ1lBTisiIHwiK0ZvcmUuUkVEKyIgSFRUUCAyLjAgUmVxdWVzdCBBdHRhY2sgV2l0aCBQcm94eSAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsiZ2V0ICAgICIrRm9yZS5DWUFOKyIgfCIrRm9yZS5SRUQrIiBHZXQgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJwb3N0ICAgIitGb3JlLkNZQU4rIiB8IitGb3JlLlJFRCsiIFBvc3QgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrImhlYWQgICAiK0ZvcmUuQ1lBTisiIHwiK0ZvcmUuUkVEKyIgSGVhZCBSZXF1ZXN0IEF0dGFjayAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsicHBzICAgICIrRm9yZS5DWUFOKyIgfCIrRm9yZS5SRUQrIiBPbmx5IEdFVCAvIEhUVFAvMS4xICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJzcG9vZiAgIitGb3JlLkNZQU4rIiB8IitGb3JlLlJFRCsiIEhUVFAgU3Bvb2YgU29ja2V0IEF0dGFjayAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrInB4c3Bvb2YiK0ZvcmUuQ1lBTisiIHwiK0ZvcmUuUkVEKyIgSFRUUCBTcG9vZiBTb2NrZXQgQXR0YWNrIFdpdGggUHJveHkgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIA0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsic29jICAgICIrRm9yZS5DWUFOKyIgfCIrRm9yZS5SRUQrIiBTb2NrZXQgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJweHJhdyAgIitGb3JlLkNZQU4rIiB8IitGb3JlLlJFRCsiIFByb3h5IFJlcXVlc3QgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrInB4c29jICAiK0ZvcmUuQ1lBTisiIHwiK0ZvcmUuUkVEKyIgUHJveHkgU29ja2V0IEF0dGFjayAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikgDQogICAgc3Rkb3V0LndyaXRlKCJcbiIpDQoNCmRlZiBsYXllcjQoKToNCiAgICBjbGVhcigpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5SRUQgICArIuKVpiAg4pWU4pWQ4pWX4pWmIOKVpuKVlOKVkOKVl+KVpuKVkOKVlyDilaYg4pWmICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICsi4pWRICDilaDilZDilaPilZrilabilZ3ilZHilaMg4pWg4pWm4pWdIOKVmuKVkOKVoyAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuUkVEICAgICsi4pWp4pWQ4pWd4pWpIOKVqSDilakg4pWa4pWQ4pWd4pWp4pWa4pWQICAg4pWpICAgICAgICAgICAgICBcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJ1ZHAgICAiK0ZvcmUuQ1lBTisifCIrRm9yZS5SRUQrIiBVRFAgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTisi4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrInRjcCAgICIrRm9yZS5DWUFOKyJ8IitGb3JlLlJFRCsiIFRDUCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikgDQogICAgc3Rkb3V0LndyaXRlKCJcbiIpDQoNCmRlZiB0b29scygpOg0KICAgIGNsZWFyKCkNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLlJFRCAgICsi4pWU4pWm4pWX4pWU4pWQ4pWX4pWU4pWQ4pWX4pWmICDilZTilZDilZcgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgKyIg4pWRIOKVkSDilZHilZEg4pWR4pWRICDilZrilZDilZcgICAgICAgICAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLlJFRCAgICArIiDilakg4pWa4pWQ4pWd4pWa4pWQ4pWd4pWp4pWQ4pWd4pWa4pWQ4pWdICAgICAgICAgICAgIFxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5SRUQrImdlb2lwICIrRm9yZS5DWUFOKyJ8IitGb3JlLlJFRCsiIEdlbyBJUCBBZGRyZXNzIExvb2t1cCIrRm9yZS5DWUFOKyIgICAgICAgICAgICAgICAgICAgICDilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4gICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLlJFRCsiZG5zICAgIitGb3JlLkNZQU4rInwiK0ZvcmUuUkVEKyIgQ2xhc3NpYyBETlMgTG9va3VwICAgIitGb3JlLkNZQU4rIiAgICAgICAgICAgICAgICAgICAgIOKVkVxuIikNCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuUkVEKyJzdWJuZXQiK0ZvcmUuQ1lBTisifCIrRm9yZS5SRUQrIiBTdWJuZXQgSVAgQWRkcmVzcyBMb29rdXAgICAiK0ZvcmUuQ1lBTisiICAgICAgICAgICAgICAg4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOICAgICAgICAgICAgKyLilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ1cbiIpIA0KICAgIHN0ZG91dC53cml0ZSgiXG4iKQ0KDQpkZWYgY2VudGVyX3RleHQodGV4dCwgdG90YWxfd2lkdGgpOg0KICAgIHNwYWNlcyA9ICh0b3RhbF93aWR0aCAtIGxlbih0ZXh0KSkgLy8gMg0KICAgIHJldHVybiAiICIgKiBzcGFjZXMgKyB0ZXh0DQoNCmRlZiB0aXRsZSgpOg0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLlJFRCArIuKVlOKVpuKVl+KVlOKVpuKVl+KVlOKVkOKVl+KVlOKVkOKVl+KVlOKVkOKVl+KVpuKVkOKVlyAgICAgXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuQ1lBTiArIiDilZHilZHilZHilZHilZHilZHilZEg4pWR4pWa4pWQ4pWX4pWR4pWjIOKVoOKVpuKVnSAgICAgIFxuIikgDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuUkVEICsi4pWQ4pWp4pWd4pWQ4pWp4pWd4pWa4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWd4pWp4pWa4pWQICAgICBcbiIpIA0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkSAiK0ZvcmUuUkVEICAgKyIgICAgICAgICAgICBUeXBlIFsgPyBdIHRvIHNlZSB0aGUgY29tbWFuZHMgICAgICIrRm9yZS5DWUFOICsiICAgICDilZFcbiIpDQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkNZQU4rIuKVkSAiK0ZvcmUuUkVEICAgKyIgICAgICAgICAgICBUZWxlZ3JhbSAtIEB4cmV0aWljICAgIitGb3JlLkNZQU4gKyIgICAgICAgICAgICAg4pWRXG4iKQ0KICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5DWUFOKyLilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ1cbiIpIA0KICAgIHN0ZG91dC53cml0ZSgiXG4iKQ0KDQp0aXRsZSgpDQoNCmRlZiBjb21tYW5kKCk6DQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisi4pWU4pWQ4pWQ4pWQIitGb3JlLlJFRCsiWyIrRm9yZS5DWUFOKyJkZG9zZXIiK0ZvcmUuUkVEKyJAIitGb3JlLkNZQU4rImlucHV0IitGb3JlLlJFRCsiXSIrRm9yZS5DWUFOKyLilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiK0ZvcmUuQ1lBTisiXG7ilZrilZDilZBceDFiWzM4OzI7MDsyNTU7MTg5bT4gIitGb3JlLlJFRCkNCiAgICBjb21tYW5kID0gaW5wdXQoKQ0KICAgIGlmIGNvbW1hbmQgPT0gImNscyIgb3IgY29tbWFuZCA9PSAiY2xlYXIiOg0KICAgICAgICBjbGVhcigpDQogICAgICAgIHRpdGxlKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gImhlbHAiIG9yIGNvbW1hbmQgPT0gIj8iOg0KICAgICAgICBoZWxwKCkNCiAgICAgICAgICANCiAgICBlbGlmIGNvbW1hbmQgPT0gImxheWVyNyIgb3IgY29tbWFuZCA9PSAiTEFZRVI3IiBvciBjb21tYW5kID09ICJsNyIgb3IgY29tbWFuZCA9PSAiTDciIG9yIGNvbW1hbmQgPT0gIkxheWVyNyI6DQogICAgICAgIGxheWVyNygpDQogICAgZWxpZiBjb21tYW5kID09ICJsYXllcjQiIG9yIGNvbW1hbmQgPT0gIkxBWUVSNCIgb3IgY29tbWFuZCA9PSAibDQiIG9yIGNvbW1hbmQgPT0gIkw0IiBvciBjb21tYW5kID09ICJMYXllcjQiOg0KICAgICAgICBsYXllcjQoKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAidG9vbHMiIG9yIGNvbW1hbmQgPT0gInRvb2wiOg0KICAgICAgICB0b29scygpICAgICANCiAgICBlbGlmIGNvbW1hbmQgPT0gImV4aXQiOg0KICAgICAgICBleGl0KCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInRlc3QiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGVzdDEodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWUuc2xlZXAoMTApDQogICAgZWxpZiBjb21tYW5kID09ICJodHRwMiIgb3IgY29tbWFuZCA9PSAiSFRUUDIiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hIVFRQMih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJweGh0dHAyIiBvciBjb21tYW5kID09ICJQWEhUVFAyIjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYSFRUUDIodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gImNmYiIgb3IgY29tbWFuZCA9PSAiQ0ZCIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoQ0ZCKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4Y2ZiIiBvciBjb21tYW5kID09ICJQWENGQiI6DQogICAgICAgIGlmIGdldF9wcm94aWVzKCk6DQogICAgICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hQWENGQih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAicHBzIiBvciBjb21tYW5kID09ICJQUFMiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hQUFModGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKSANCiAgICBlbGlmIGNvbW1hbmQgPT0gInNwb29mIiBvciBjb21tYW5kID09ICJTUE9PRiI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFNQT09GKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkgDQogICAgZWxpZiBjb21tYW5kID09ICJweHNwb29mIiBvciBjb21tYW5kID09ICJQWFNQT09GIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgICN0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICAjdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hQWFNQT09GKHRhcmdldCwgdGhyZWFkLCB0LCBnZXRfcHJveHlsaXN0KCJTT0NLUzUiKSkNCiAgICAgICAgI3RpbWVyLmpvaW4oKQ0KICAgICAgICB0aW1lLnNsZWVwKDEwMDApDQogICAgZWxpZiBjb21tYW5kID09ICJnZXQiIG9yIGNvbW1hbmQgPT0gIkdFVCI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFJBVyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJwb3N0IiBvciBjb21tYW5kID09ICJQT1NUIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoUE9TVCh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJoZWFkIiBvciBjb21tYW5kID09ICJIRUFEIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoSEVBRCh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJweHJhdyIgb3IgY29tbWFuZCA9PSAiUFhSQVciOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICAgICAgTGF1bmNoUFhSQVcodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInNvYyIgb3IgY29tbWFuZCA9PSAiU09DIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoU09DKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4c29jIiBvciBjb21tYW5kID09ICJQWFNPQyI6DQogICAgICAgIGlmIGdldF9wcm94aWVzKCk6DQogICAgICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hQWFNPQyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAiY2ZyZXEiIG9yIGNvbW1hbmQgPT0gIkNGUkVRIjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBbKl0gIitGb3JlLlJFRCsiQnlwYXNzaW5nIENGLi4uIChNYXggNjBzKVxuIikNCiAgICAgICAgaWYgZ2V0X2Nvb2tpZSh0YXJnZXQpOg0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaENGUFJPKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIgWypdICIrRm9yZS5SRUQrIkZhaWxlZCB0byBieXBhc3MgY2ZcbiIpDQogICAgZWxpZiBjb21tYW5kID09ICJjZnNvYyIgb3IgY29tbWFuZCA9PSAiQ0ZTT0MiOg0KICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFsqXSAiK0ZvcmUuUkVEKyJCeXBhc3NpbmcgQ0YuLi4gKE1heCA2MHMpXG4iKQ0KICAgICAgICBpZiBnZXRfY29va2llKHRhcmdldCk6DQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICAgICAgTGF1bmNoQ0ZTT0ModGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgICAgICB0aW1lci5qb2luKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBbKl0gIitGb3JlLlJFRCsiRmFpbGVkIHRvIGJ5cGFzcyBjZlxuIikNCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4c2t5IiBvciBjb21tYW5kID09ICJQWFNLWSI6DQogICAgICAgIGlmIGdldF9wcm94aWVzKCk6DQogICAgICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWF0dGFja1NLWSwgYXJncz0odGFyZ2V0LCB0LCB0aHJlYWQpKS5zdGFydCgpDQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJza3kiIG9yIGNvbW1hbmQgPT0gIlNLWSI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1hdHRhY2tTVEVMTEFSLCBhcmdzPSh0YXJnZXQsIHQsIHRocmVhZCkpLnN0YXJ0KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIGNvbW1hbmQgPT0gInVkcCIgb3IgY29tbWFuZCA9PSAiVURQIjoNCiAgICAgICAgdGFyZ2V0LCBwb3J0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNCgpDQogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXJ1bnNlbmRlciwgYXJncz0odGFyZ2V0LCBwb3J0LCB0LCB0aHJlYWQpKS5zdGFydCgpDQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBjb21tYW5kID09ICJ0Y3AiIG9yIGNvbW1hbmQgPT0gIlRDUCI6DQogICAgICAgIHRhcmdldCwgcG9ydCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDQoKQ0KICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1ydW5mbG9vZGVyLCBhcmdzPSh0YXJnZXQsIHBvcnQsIHQsIHRocmVhZCkpLnN0YXJ0KCkNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICAgICAgDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgICAgIA0KICAgIGVsaWYgY29tbWFuZCA9PSAic3VibmV0IjoNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFs+XSAiK0ZvcmUuUkVEKyJJUCAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuTElHSFRDWUFOX0VYKQ0KICAgICAgICB0YXJnZXQgPSBpbnB1dCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL3N1Ym5ldGNhbGMvP3E9e3RhcmdldH0iKQ0KICAgICAgICAgICAgcHJpbnQoci50ZXh0KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwcmludCgnQW4gZXJyb3IgaGFzIG9jY3VyQ1lBTiB3aGlsZSBzZW5kaW5nIHRoZSByZXF1ZXN0IHRvIHRoZSBBUEkhJykgICAgICAgICAgICAgICAgIA0KICAgICAgICANCiAgICBlbGlmIGNvbW1hbmQgPT0gImRucyI6DQogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBbPl0gIitGb3JlLlJFRCsiSVAvRE9NQUlOICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5MSUdIVENZQU5fRVgpDQogICAgICAgIHRhcmdldCA9IGlucHV0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldChmImh0dHBzOi8vYXBpLmhhY2tlcnRhcmdldC5jb20vcmV2ZXJzZWRucy8/cT17dGFyZ2V0fSIpDQogICAgICAgICAgICBwcmludChyLnRleHQpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHByaW50KCdBbiBlcnJvciBoYXMgb2NjdXJDWUFOIHdoaWxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIEFQSSEnKQ0KICAgICAgICAgICAgDQogICAgZWxpZiBjb21tYW5kID09ICJzdWJ3aG9pcyI6DQogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBbPl0gIitGb3JlLlJFRCsiSVAvRE9NQUlOICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5MSUdIVENZQU5fRVgpDQogICAgICAgIHRhcmdldCA9IGlucHV0KCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vYXN5bmMtcXVhcnQub25yZW5kZXIuY29tL2RvbWFpbl9pbmZvJw0KICAgICAgICAgICAganNvbl9kYXRhID0gew0KICAgICAgICAgICAncXVlcnlfZG9tYWluJzogdGFyZ2V0LA0KICAgICAgICAgICAnem9vbWV5ZSc6IFRydWUsDQogICAgICAgICAgICdkdW1wc3Rlcic6IFRydWUsDQogICAgICAgICAgICdzdWJ3aG9pcyc6IFRydWUsDQogICAgICAgICAgICdwb3J0X3NjYW5uZXInOiBUcnVlLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwganNvbj1qc29uX2RhdGEpDQogICAgICAgICAgICBwcmludChyZXNwb25zZS50ZXh0KQ0KDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHByaW50KCdBbiBlcnJvciBoYXMgYXN5bmMgcXVhcnQgd2hpbGUgc2VuZGluZyB0aGUgcmVxdWVzdCB0byB0aGUgQVBJIScpDQogICAgICAgICAgICANCiAgICBlbGlmIGNvbW1hbmQgPT0gImdlb2lwIjoNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFs+XSAiK0ZvcmUuUkVEKyJJUCAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuTElHSFRDWUFOX0VYKQ0KICAgICAgICB0YXJnZXQgPSBpbnB1dCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL2dlb2lwLz9xPXt0YXJnZXR9IikNCiAgICAgICAgICAgIHByaW50KHIudGV4dCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcHJpbnQoJ0FuIGVycm9yIGhhcyBvY2N1ckNZQU4gd2hpbGUgc2VuZGluZyB0aGUgcmVxdWVzdCB0byB0aGUgQVBJIScpDQogICAgZWxzZToNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFs+XSAiK0ZvcmUuUkVEKyJVbmtub3duIGNvbW1hbmQuIHR5cGUgJz8nIG9yICdoZWxwJyB0byBzZWUgYWxsIGNvbW1hbmRzLlxuIikNCiAgICAgICAgICANCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAgIA0KDQpkZWYgZnVuYygpOg0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBbXHgxYlszODsyOzA7MjU1OzE4OW1MQVlFUiA3IitGb3JlLkNZQU4rIl1cbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJjZmIgICAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIkJ5cGFzcyBDRiBhdHRhY2tcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJweGNmYiAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIkJ5cGFzcyBDRiBhdHRhY2sgd2l0aCBwcm94eVxuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIg4oCiICIrRm9yZS5SRUQrImNmcHJvICAgICAgIitGb3JlLkNZQU4rIjogIitGb3JlLlJFRCsiQnlwYXNzIENGIFVBTSwgQ0YgQ0FQVENIQSwgQ0YgQkZNLCBDRiBKUyAocmVxdWVzdClcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJjZnNvYyAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIkJ5cGFzcyBDRiBVQU0sIENGIENBUFRDSEEsIENGIEJGTSwgQ0YgSlMgKHNvY2tldClcbiIpDQojICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsic2t5ICAgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJIVFRQUyBGbG9vZCBhbmQgYnlwYXNzIGZvciBDRiBOb1NlYywgRERvUyBHdWFyZCBGcmVlIGFuZCB2U2hpZWxkXG4iKQ0KIyAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIg4oCiICIrRm9yZS5SRUQrInN0ZWxsYXIgICAgIitGb3JlLkNZQU4rIjogIitGb3JlLlJFRCsiSFRUUFMgU2t5IG1ldGhvZCB3aXRob3V0IHByb3hpZXNcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJyYXcgICAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIlJlcXVlc3QgYXR0YWNrXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsicG9zdCAgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJQb3N0IFJlcXVlc3QgYXR0YWNrXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsiaGVhZCAgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJIZWFkIFJlcXVlc3QgYXR0YWNrXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsic29jICAgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJTb2NrZXQgYXR0YWNrXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsicHhyYXcgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJQcm94eSBSZXF1ZXN0IGF0dGFja1xuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIg4oCiICIrRm9yZS5SRUQrInB4c29jICAgICAgIitGb3JlLkNZQU4rIjogIitGb3JlLlJFRCsiUHJveHkgU29ja2V0IGF0dGFja1xuIikNCiAgICANCiAgICAjc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFxuWyIrRm9yZS5SRUQrIkxBWUVSIDQiK0ZvcmUuQ1lBTisiXVxuIikNCiAgICAjc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJ0Y3AgICAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIlN0cm9uZyBUQ1AgYXR0YWNrIChub3Qgc3VwcG9ydGVkKVxuIikNCiAgICAjc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJ1ZHAgICAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIlN0cm9uZyBVRFAgYXR0YWNrIChub3Qgc3VwcG9ydGVkKVxuIikNCg0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBcbltceDFiWzM4OzI7MDsyNTU7MTg5bVRPT0xTIitGb3JlLkNZQU4rIl1cbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJkbnMgICAgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIkNsYXNzaWMgRE5TIExvb2t1cFxuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIg4oCiICIrRm9yZS5SRUQrImdlb2lwICAgICAgIitGb3JlLkNZQU4rIjogIitGb3JlLlJFRCsiR2VvIElQIEFkZHJlc3MgTG9va3VwXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsic3VibmV0ICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJTdWJuZXQgSVAgQWRkcmVzcyBMb29rdXBcbiIpDQogICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIOKAoiAiK0ZvcmUuUkVEKyJzdWJ3aG9pcyAgICAgIitGb3JlLkNZQU4rIjogIitGb3JlLlJFRCsiU3ViZG9tYWluIExvb2t1cFxuIikNCiAgICANCiAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIgXG5bXHgxYlszODsyOzA7MjU1OzE4OW1PVEhFUiIrRm9yZS5DWUFOKyJdXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsiY2xlYXIvY2xzICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJDbGVhciBjb25zb2xlXG4iKQ0KICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiDigKIgIitGb3JlLlJFRCsiZXhpdCAgICAgICAiK0ZvcmUuQ1lBTisiOiAiK0ZvcmUuUkVEKyJCeWUuLlxuIikNCiAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIg4oCiICIrRm9yZS5SRUQrImNDWUFOaXQgICAgICIrRm9yZS5DWUFOKyI6ICIrRm9yZS5SRUQrIlRoYW5rcyBmb3JcbiIpDQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgaW5pdChjb252ZXJ0PVRydWUpDQogICAgaWYgbGVuKHN5cy5hcmd2KSA8IDI6DQogICAgICAgIHVhID0gb3BlbignLi9yZXNvdXJjZXMvdWEudHh0JywgJ3InKS5yZWFkKCkuc3BsaXQoJ1xuJykNCiAgICAgICAgY2xlYXIoKQ0KICAgICAgICB0aXRsZSgpDQogICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICBjb21tYW5kKCkNCiAgICBlbGlmIGxlbihzeXMuYXJndikgPT0gNToNCiAgICAgICAgcGFzcw0KICAgIGVsc2U6DQogICAgICAgIHN0ZG91dC53cml0ZSgiTWV0aG9kOiBjZmIsIHB4Y2ZiLCBjZnJlcSwgY2Zzb2MsIHB4c2t5LCBza3ksIGh0dHAyLCBweGh0dHAyLCBnZXQsIHBvc3QsIGhlYWQsIHNvYywgcHhyYXcsIHB4c29jXG4iKQ0KICAgICAgICBzdGRvdXQud3JpdGUoZiJ1c2FnZTp+IyBweXRob24zIHtzeXMuYXJndlswXX0gPG1ldGhvZD4gPHRhcmdldD4gPHRocmVhZD4gPHRpbWU+XG4iKQ0KICAgICAgICBzeXMuZXhpdCgpDQogICAgdWEgPSBvcGVuKCcuL3Jlc291cmNlcy91YS50eHQnLCAncicpLnJlYWQoKS5zcGxpdCgnXG4nKQ0KICAgIG1ldGhvZCA9IHN5cy5hcmd2WzFdLnJzdHJpcCgpDQogICAgdGFyZ2V0ID0gc3lzLmFyZ3ZbMl0ucnN0cmlwKCkNCiAgICB0aHJlYWQgPSBzeXMuYXJndlszXS5yc3RyaXAoKQ0KICAgIHQgICAgICA9IHN5cy5hcmd2WzRdLnJzdHJpcCgpDQogICAgaWYgbWV0aG9kID09ICJjZmIiOg0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaENGQih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInB4Y2ZiIjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hQWENGQih0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgbWV0aG9kID09ICJnZXQiOg0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFJBVyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInBvc3QiOg0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaFBPU1QodGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsaWYgbWV0aG9kID09ICJoZWFkIjoNCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICBMYXVuY2hIRUFEKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAicHhyYXciOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYUkFXKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInNvYyI6DQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgTGF1bmNoU09DKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAicHhzb2MiOg0KICAgICAgICBpZiBnZXRfcHJveGllcygpOg0KICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkNCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkNCiAgICAgICAgICAgIExhdW5jaFBYU09DKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gImNmcmVxIjoNCiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFsqXSAiK0ZvcmUuUkVEKyJCeXBhc3NpbmcgQ0YuLi4gKE1heCA2MHMpXG4iKQ0KICAgICAgICBpZiBnZXRfY29va2llKHRhcmdldCk6DQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICAgICAgdGltZXIuc3RhcnQoKQ0KICAgICAgICAgICAgTGF1bmNoQ0ZQUk8odGFyZ2V0LCB0aHJlYWQsIHQpDQogICAgICAgICAgICB0aW1lci5qb2luKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHN0ZG91dC53cml0ZShGb3JlLkNZQU4rIiBbKl0gIitGb3JlLlJFRCsiRmFpbGVkIHRvIGJ5cGFzcyBjZlxuIikNCiAgICBlbGlmIG1ldGhvZCA9PSAiY2Zzb2MiOg0KICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5DWUFOKyIgWypdICIrRm9yZS5SRUQrIkJ5cGFzc2luZyBDRi4uLiAoTWF4IDYwcylcbiIpDQogICAgICAgIGlmIGdldF9jb29raWUodGFyZ2V0KToNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hDRlNPQyh0YXJnZXQsIHRocmVhZCwgdCkNCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuQ1lBTisiIFsqXSAiK0ZvcmUuUkVEKyJGYWlsZWQgdG8gYnlwYXNzIGNmXG4iKQ0KICAgIGVsaWYgbWV0aG9kID09ICJodHRwMiI6DQogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIExhdW5jaEhUVFAyKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAicHhodHRwMiI6DQogICAgICAgIGlmIGdldF9wcm94aWVzKCk6DQogICAgICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICBMYXVuY2hQWEhUVFAyKHRhcmdldCwgdGhyZWFkLCB0KQ0KICAgICAgICAgICAgdGltZXIuam9pbigpDQogICAgZWxpZiBtZXRob2QgPT0gInB4c2t5IjoNCiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToNCiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQ0KICAgICAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9YXR0YWNrU0tZLCBhcmdzPSh0YXJnZXQsIHQsIHRocmVhZCkpLnN0YXJ0KCkNCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpDQogICAgICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgICAgICB0aW1lci5qb2luKCkNCiAgICBlbGlmIG1ldGhvZCA9PSAic2t5IjoNCiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpDQogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWF0dGFja1NURUxMQVIsIGFyZ3M9KHRhcmdldCwgdCwgdGhyZWFkKSkuc3RhcnQoKQ0KICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQ0KICAgICAgICB0aW1lci5zdGFydCgpDQogICAgICAgIHRpbWVyLmpvaW4oKQ0KICAgIGVsc2U6DQogICAgICAgIHN0ZG91dC53cml0ZSgiTm8gbWV0aG9kIGZvdW5kLlxuTWV0aG9kOiBjZmIsIHB4Y2ZiLCBjZnJlcSwgY2Zzb2MsIHB4c2t5LCBza3ksIGh0dHAyLCBweGh0dHAyLCBnZXQsIHBvc3QsIGhlYWQsIHNvYywgcHhyYXcsIHB4c29jXG4iKQ0K').decode())